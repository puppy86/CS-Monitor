
@section script
{
    <script>
        var vm = new Vue({
            el: "#app",
            data: {
                net: M_NET,
                page: @ViewData["page"],
                loading: false,
                tokensData: { },
                numStr: ''
            },
            methods: {
                getTokens: function(p) {
                    this.loading = true;
                    $.get(`${M_API}/Tokens?page=${p}`)
                        .done(function(data) {
                            vm.page = data.page;
                            vm.tokensData = data;
                        })
                        .always(function() {
                            vm.loading = false;
                        });
                }
            },
            created: function() {
                this.getTokens(this.page);
            }
        });
    </script>
}

<div class="row justify-content-center" v-show="loading">
    <div class="col-auto">
        <h6>Loading...</h6>
        <div class="progress mt-1">
            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
    </div>
</div>
<div v-show="!loading">
    <h4 class="my-3">Tokens</h4>
    <div class="mt-4">Tokens {{tokensData.numStr}}</div>
    <pb :page="page" :getfn="getTokens" :next="tokensData.haveNextPage" :last="tokensData.lastPage"></pb>
    <div class="table-responsive">
        <table class="table table-sm table-striped border-bottom border-primary table_info_trans">
            <thead class="thead-light">
                <tr>
                    <th>№</th>
                    <th>Address</th>
                    <th>Id</th>
                    <th>Name</th>
                    <th>Site</th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="item in tokensData.tokens">
                    <td>{{item.index}}</td>
                    <td class="hash"><a :href="net + '/token/' + item.address">{{item.address}}</a></td>
                    <td>{{item.id}}</td>
                    <td>{{item.name}}</td>
                    <td>{{item.site}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <pb :page="page" :getfn="getTokens" :next="tokensData.haveNextPage" :last="tokensData.lastPage"></pb>
</div>
